<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Using Static Assets &#8212; Effective Django</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0-pre',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Additional Generic Views" href="additional-views.html" />
    <link rel="prev" title="Writing Views" href="views.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="using-static-assets">
<h1>Using Static Assets<a class="headerlink" href="#using-static-assets" title="Permalink to this headline">¶</a></h1>
<p>Now that we have a basic application where we can add contacts and
list them, it&#8217;s reasonable to think about how we&#8217;d make this look more
appealing. Most modern web applications are a combination of server
side code/views, and client side, static assets, such as JavaScript
and CSS. Regardless of whether you choose JavaScript or CoffeeScript,
CSS or SASS, Django provides support for integrating static assets
into your project.</p>
<div class="section" id="adding-static-files">
<h2>Adding Static Files<a class="headerlink" href="#adding-static-files" title="Permalink to this headline">¶</a></h2>
<p>Django distinguishes between &#8220;static&#8221; and &#8220;media&#8221; files. The former
are static assets included with your app or project. The latter are
files uploaded by users using one of the file storage backends. Django
includes a contrib app, <code class="docutils literal"><span class="pre">django.contrib.staticfiles</span></code> for managing
static files and, importantly, generating the URLs to them. You could,
of course, simply hard code the URLs to your static assets, and that&#8217;d
probably work for a while. But if you want to move your static assets
to their own server, or to a CDN, using generated URLs let&#8217;s you make
that change without needing to update your templates.
<code class="docutils literal"><span class="pre">django.contrib.staticfiles</span></code> is enabled by default when you create a
new project, so you can just start using it.</p>
<p>We&#8217;re going to add <a class="reference external" href="http://getbootstrap.com">Bootstrap</a> to our project for some basic styling.
You can download the Bootstrap files from its website,
<a class="reference external" href="http://getbootstrap.com">http://getbootstrap.com</a>.</p>
<p>Django supports adding static files at both the application and
project level. Where you add them sort of depends on how tied to your
specific assembly of apps they are. That is, are they reusable for
anyone using your app, or are they specific to your particular
deployment?</p>
<p>App static files are stored in the <code class="docutils literal"><span class="pre">static</span></code> subdirectory within the app. Django will also look in any directories listed in the <code class="docutils literal"><span class="pre">STATICFILES_DIRS</span></code> setting. Let&#8217;s update our project settings to specify a static files directory.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">STATIC_URL</span> <span class="o">=</span> <span class="s1">&#39;/static/&#39;</span>
<span class="n">STATICFILES_DIRS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s2">&quot;static&quot;</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Note that we use <code class="docutils literal"><span class="pre">os.path</span></code> to construct the absolute path. This
ensures Django can locate the files unambiguously and that we don&#8217;t need to worry about where we&#8217;ve checked out our code.</p>
<p>The <a class="reference external" href="https://docs.djangoproject.com/en/1.11/ref/settings/#std:setting-STATIC_URL">STATIC_URL setting</a> tells Django what the root URL for your static files is. By default it&#8217;s set to <code class="docutils literal"><span class="pre">/static/</span></code>.</p>
<p>Let&#8217;s go ahead and create the static directory in our project and
unpack Bootstrap into it.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">(addresses) $</span> ~/p/effdj-projects/addresses$ mkdir addressbook/static
<span class="gp">(addresses) $</span> ~/p/effdj-projects/addresses$ <span class="nb">cd</span> addressbook/static/
<span class="gp">(addresses) $</span> ~/p/effdj-projects/addresses/addressbook/static$ unzip ~/downloads/bootstrap-3.3.7-dist.zip
<span class="go">Archive:  ~/downloads/bootstrap-3.3.7-dist.zip</span>
<span class="go">   creating: bootstrap-3.3.7-dist/css/</span>
<span class="go">  inflating: bootstrap-3.3.7-dist/css/bootstrap-theme.css</span>
<span class="go">  inflating: bootstrap-3.3.7-dist/css/bootstrap-theme.css.map</span>
<span class="go">  inflating: bootstrap-3.3.7-dist/css/bootstrap-theme.min.css</span>
<span class="go">  inflating: bootstrap-3.3.7-dist/css/bootstrap-theme.min.css.map</span>
<span class="go">  inflating: bootstrap-3.3.7-dist/css/bootstrap.css</span>
<span class="go">  inflating: bootstrap-3.3.7-dist/css/bootstrap.css.map</span>
<span class="go">  inflating: bootstrap-3.3.7-dist/css/bootstrap.min.css</span>
<span class="go">  inflating: bootstrap-3.3.7-dist/css/bootstrap.min.css.map</span>
<span class="go">   creating: bootstrap-3.3.7-dist/fonts/</span>
<span class="go">  inflating: bootstrap-3.3.7-dist/fonts/glyphicons-halflings-regular.eot</span>
<span class="go">  inflating: bootstrap-3.3.7-dist/fonts/glyphicons-halflings-regular.svg</span>
<span class="go">  inflating: bootstrap-3.3.7-dist/fonts/glyphicons-halflings-regular.ttf</span>
<span class="go">  inflating: bootstrap-3.3.7-dist/fonts/glyphicons-halflings-regular.woff</span>
<span class="go">  inflating: bootstrap-3.3.7-dist/fonts/glyphicons-halflings-regular.woff2</span>
<span class="go">   creating: bootstrap-3.3.7-dist/js/</span>
<span class="go">  inflating: bootstrap-3.3.7-dist/js/bootstrap.js</span>
<span class="go">  inflating: bootstrap-3.3.7-dist/js/bootstrap.min.js</span>
<span class="go">  inflating: bootstrap-3.3.7-dist/js/npm.js</span>
</pre></div>
</div>
</div>
<div class="section" id="referring-to-static-files-in-templates">
<h2>Referring to Static Files in Templates<a class="headerlink" href="#referring-to-static-files-in-templates" title="Permalink to this headline">¶</a></h2>
<p>The Django staticfiles app includes a <a class="reference external" href="https://docs.djangoproject.com/en/1.11/ref/templates/builtins/">template tag</a> that make it
easy to refer to static files within your templates. You load template
tag libraries using the <code class="docutils literal"><span class="pre">load</span></code> tag.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="n">load</span> <span class="n">staticfiles</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
<p>After loading the static files library, you can refer to the file
using the <code class="docutils literal"><span class="pre">static</span></code> tag.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">link</span> <span class="n">href</span><span class="o">=</span><span class="s2">&quot;{</span><span class="si">% s</span><span class="s2">tatic &#39;bootstrap-3.3.7-dist/css/bootstrap.min.css&#39; %}&quot;</span>
      <span class="n">rel</span><span class="o">=</span><span class="s2">&quot;stylesheet&quot;</span> <span class="n">media</span><span class="o">=</span><span class="s2">&quot;screen&quot;</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Note that the path we specify is <em>relative</em> to the static files directory. Django will join this path with the <code class="docutils literal"><span class="pre">STATIC_URL</span></code> setting to generate the actual URL to use.</p>
</div>
<div class="section" id="simple-template-inclusion">
<h2>Simple Template Inclusion<a class="headerlink" href="#simple-template-inclusion" title="Permalink to this headline">¶</a></h2>
<p>We want to add the Boostrap CSS to all of our templates, but we&#8217;d like
to avoid repeating ourself: if we add it to each template
individually, when we want to make changes (for example, to add
another stylesheet) we have to make them to all the files. To solve
this, we&#8217;ll create a base template that the others will inherit from.</p>
<p>Let&#8217;s create <code class="docutils literal"><span class="pre">base.html</span></code> in the <code class="docutils literal"><span class="pre">templates</span></code> directory of our
<code class="docutils literal"><span class="pre">contacts</span></code> app.</p>
<div class="highlight-django"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">load</span> <span class="nv">staticfiles</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">&lt;html&gt;</span>
<span class="x">  &lt;head&gt;</span>
<span class="x">    &lt;link href=&quot;</span><span class="cp">{%</span> <span class="k">static</span> <span class="s1">&#39;bootstrap-3.3.7-dist/css/bootstrap.min.css&#39;</span> <span class="cp">%}</span><span class="x">&quot;</span>
<span class="x">          rel=&quot;stylesheet&quot; media=&quot;screen&quot;&gt;</span>
<span class="x">  &lt;/head&gt;</span>

<span class="x">  &lt;body&gt;</span>
<span class="x">    </span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    </span><span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">    &lt;script src=&quot;</span><span class="cp">{%</span> <span class="k">static</span> <span class="s1">&#39;bootstrap-3.3.7-dist/js/bootstrap.min.js&#39;</span> <span class="cp">%}</span><span class="x">&quot;&gt;&lt;/script&gt;</span>
<span class="x">  &lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">base.html</span></code> defines the common structure for our pages, and includes
a <code class="docutils literal"><span class="pre">block</span></code> tag, which other templates can fill in.</p>
<p>We&#8217;ll update <code class="docutils literal"><span class="pre">contact_list.html</span></code> to extend from <code class="docutils literal"><span class="pre">base.html</span></code> and
fill in the <code class="docutils literal"><span class="pre">content</span></code> block.</p>
<div class="highlight-django"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&quot;base.html&quot;</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">&lt;h1&gt;Contacts&lt;/h1&gt;</span>

<span class="x">&lt;ul&gt;</span>
<span class="x">  </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">contact</span> <span class="k">in</span> <span class="nv">object_list</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    &lt;li class=&quot;contact&quot;&gt;</span><span class="cp">{{</span> <span class="nv">contact</span> <span class="cp">}}</span><span class="x">&lt;/li&gt;</span>
<span class="x">  </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">&lt;/ul&gt;</span>

<span class="x">&lt;a href=&quot;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s2">&quot;contacts-new&quot;</span> <span class="cp">%}</span><span class="x">&quot;&gt;add contact&lt;/a&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
<p>Note that the <code class="docutils literal"><span class="pre">block</span></code> tag is used to both _define_ the block, as well as placee content into it. Django matches blocks based on their name (<code class="docutils literal"><span class="pre">content</span></code> in this case); if a block is omitted in a template, the content from the &#8220;parent&#8221; template will be used instead.</p>
</div>
<div class="section" id="serving-static-files">
<h2>Serving Static Files<a class="headerlink" href="#serving-static-files" title="Permalink to this headline">¶</a></h2>
<p>We&#8217;ve told Django where we store our static files, and we&#8217;ve told it
what URL structure to use, but we haven&#8217;t actually connected the two
together. For the purposes of debugging, we actually don&#8217;t have to do anything: when you run the Django server in debug mode (<code class="docutils literal"><span class="pre">DEBUG=True</span></code> in <code class="docutils literal"><span class="pre">settings.py</span></code>), Django will automatically add the correct URLs for serving static files.</p>
<p>This is not suitable for production, however, as the Django server is written with serving the application in mind, not static files. The Django documentation on <a class="reference external" href="https://docs.djangoproject.com/en/1.11/howto/static-files/deployment/">deploying static files</a> does a good job of walking through the options for getting your static files onto your CDN or static file server, and we&#8217;ll cover more of that in the section on <a href="#id1"><span class="problematic" id="id2">Deploying_</span></a>.</p>
<p>Now we can run the server and see our newly Boostrapped templates in
action.</p>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">Replace image here</p>
</div>
<img alt="../_images/boostrapped.png" src="../_images/boostrapped.png" />
</div>
<div class="section" id="review">
<h2>Review<a class="headerlink" href="#review" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Django distinguishes between static site files, and user uploaded
media</li>
<li>The <code class="docutils literal"><span class="pre">staticfiles</span></code> app is included to help manage static files and
serve them during development</li>
<li>Static files can be included with apps, or with the project. Choose
where you put them based on whether you expect all users of your app
to need them.</li>
<li>Templates can extend one another, using <code class="docutils literal"><span class="pre">block</span></code> tags.</li>
</ul>
</div>
</div>



            
              
              <div class="page_footer">
              <h4>Next</h4>
                <a href="additional-views.html">Additional Generic Views</a>
              </div>
              
            
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Effective Django</a></h1>











<h3>&nbsp;</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Getting Started with Django</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="getting-started.html">Creating a Django Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="models.html">Using Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="views.html">Writing Views</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Using Static Assets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#adding-static-files">Adding Static Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#referring-to-static-files-in-templates">Referring to Static Files in Templates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#simple-template-inclusion">Simple Template Inclusion</a></li>
<li class="toctree-l3"><a class="reference internal" href="#serving-static-files">Serving Static Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#review">Review</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="additional-views.html">Additional Generic Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="forms.html">Form Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="related.html">Related Models</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../02_production/index.html">Building for Production</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03_advanced/index.html">Advanced Django</a></li>
<li class="toctree-l1"><a class="reference internal" href="../acknowledgments.html">Acknowledgments</a></li>
</ul>


<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Getting Started with Django</a><ul>
      <li>Previous: <a href="views.html" title="previous chapter">Writing Views</a></li>
      <li>Next: <a href="additional-views.html" title="next chapter">Additional Generic Views</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<h3>Donate</h3>
<p>
Consider supporting the authors on <a href="https://www.gratipay.com/">Gratipay</a>:
</p>
<script data-gratipay-teamslug="effectivedjango"
  src="https://grtp.co/v2.js" async></script>

        </div>
      </div>
      <div class="clearer"></div>
  </div>


    <div class="footer">
      &copy;2012-2017, Nathan R. Yergler.
      
      |
      <a href="../_sources/01_intro/static.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>